---
title: 隐式转换问题
lang: zh-CN
date: 2022-11-02 16:46:43
permalink: /interview/explain/conversion/
---

参考知识点：

- [JS 知识点 - 操作符](/guide/js/points/#_4-操作符)

## 1. 以下代码输出什么？

```javascript
console.log(++[[]][+[]]+[+[]]);	// 10
```

该表达式拆分为 `++[[]][+[]]`，`+`，`[+[]]`。

- 对于 `[+[]]`，由于 `+[]` 会将 `[]` 强转为数字，`[]` 转为数字的方法是调用 `toString()` 得到空字符串 `""` 再转换，因此 `+[]` 得到 `0`，`[+[]]` 为 `[0]`。
- 因此 `+` 左边是 `++[[]][0]`，右边是 `[0]`。
- 中括号比 `++` 优先级更高，对于 `[[]][0]`，得到内部数组 `[]` 的引用，称之为 `A`。
- `++A` 将 `A` 强转为数字 `0` 再执行自增（等同于 `(+A)+1`），即 `1`。
- 式子整理为 `1+[0]`，`[0]` 强转为字符串 `"0"`，结果返回 `1+"0"` 即 `"10"`。

## 2. 以下代码输出什么？

```javascript
console.log((!+[]+[]+![]).length);  // 9
```

该表达式拆分为 `!+[]`，`+`，`[]`，`+`，`![]`。

- 对于 `!+[]`，它是表达式 `+[]` 的取反布尔值，而表达式 `+[]` 的值为 `[]` 的强转数字值 `0`，因此表达式结果为 `true`。
- 对于 `true + []`，`[]` 调用 `toString()` 得到空字符串 `""`，两者相加得到字符串 `"true"`。
- 对于 `![]`，它是表达式 `[]` 的取反布尔值，而 `[]` 被认为是 truthy，因此 `![]` 结果为 `false`。
- 对于 `"true" + false`，执行字符串连接，结果为 `"truefalse"`，长度为 9。
